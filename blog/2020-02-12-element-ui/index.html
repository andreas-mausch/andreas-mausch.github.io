
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Eleventy v3.0.0">
    <title>Eat my time, element-ui</title>
    <link rel="stylesheet" href="/styles/style.css"/>
    <link rel="stylesheet" href="/styles/icons/iconism.css"/>
    
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" sizes="any"/>
  </head>
  <body>
    <header class="site-header">
      <div class="site-header-content">
        <a class="site-title" href="/">Andreas Mausch</a>
        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              viewbox="0 0 16 16"
              width="100%"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5">
              <path d="m2.75 12.25h10.5m-10.5-4h10.5m-10.5-4h10.5"/>
            </svg>
          </a>
          <input id="nav-toggle" type="checkbox"/>
          <label class="nav-button-container" for="nav-toggle">
            <div class="nav-button"></div>
          </label>
          <ol class="site-nav-items">
            <a class="page-link" href="/"><li class="page-link-home">Home</li></a><a class="page-link" href="/whatsapp-viewer/"><li>WhatsApp Viewer</li></a><a class="page-link" href="/blog/"><li>Blog</li></a></ol>
        </nav>
      </div>
    </header>
    <div class="content">
      
<h1>Eat my time, element-ui</h1>
<div>
  <time class="postlist-date" datetime="2020-02-12T18:00:00.000+00:00">Feb 12, 2020</time>
  <ul class="tags">
    
        
          <li><a href="/blog/tags/copied-dependency">#copied-dependency</a></li>
        
    
        
          <li><a href="/blog/tags/element-ui">#element-ui</a></li>
        
    
        
          <li><a href="/blog/tags/frontend">#frontend</a></li>
        
    
        
          <li><a href="/blog/tags/npm">#npm</a></li>
        
    
        
          <li><a href="/blog/tags/popper.js">#popper.js</a></li>
        
    
        
    
        
          <li><a href="/blog/tags/software-development">#software-development</a></li>
        
    
  </ul>
</div>



<p>I'm currently on a project to build a micro-frontend. Cool!</p>
<p>In general.</p>
<p>Technology stack is Vue.js, element-ui, export as web components, GraphQL API.</p>
<p>So today we found that dropdowns (el-select) won't work properly due to a bug.
The dropdown popup (implemented using popper.js) is positioned incorrectly and we see erros in the browser console.</p>
<p>:(</p>
<p>After some investigation we found <strong><a href="https://github.com/ElemeFE/element/blob/8ab1db83c537bf0b0d63bb6397ad3440811e892e/src/utils/popper.js" class="external-link" target="_blank">this!</a></strong></p>
<p>Right, somebody decided it's a good idea to just c/p the source of popper.js into the element-ui repo,
instead of just making it a dependency (like any good citizen would).</p>
<p>No chance to overwrite the version in the package-lock.json because of this inlined dependency.</p>
<p>Element has nearly 44k stars on github btw. How.</p>
<p>Now the last time this &quot;dependency&quot; has been updated is almost exactly two years ago: Feb 2018.</p>
<p>Back then popper.js had issues dealing with shadow dom correctly. These have been fixed long ago.
But not in element-ui.</p>
<p>Four days ago, somebody else apparently <a href="https://github.com/ElemeFE/element/pull/18792" class="external-link" target="_blank">noticed it</a>.</p>
<p>Some more links:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/54352781/how-to-fix-element-and-popper-js-errors-in-vuejs-web-components-with-a-shadowroo" class="external-link" target="_blank">stackoverflow.com</a></li>
<li><a href="https://github.com/ElemeFE/element/pull/11778" class="external-link" target="_blank">Popper: update vue-popper</a></li>
<li><a href="https://github.com/popperjs/popper-core/issues/686" class="external-link" target="_blank">popper.js: Support for ShadowDOM</a></li>
</ul>
<img src="/blog/2020-02-12-element-ui/stale.png" width="770" height="898" alt="undefined">


<script async src="/scripts/index.js"></script>

    </div>
  </body>
</html>
