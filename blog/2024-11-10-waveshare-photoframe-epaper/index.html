
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waveshare 7.3inch ACeP 7-Color E-Paper</title>
    <link rel="stylesheet" href="/styles/style.css"/>
    <link rel="stylesheet" href="/styles/icons/iconism.css"/>
    
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" sizes="any"/>
  </head>
  <body>
    <header class="site-header">
      <div class="site-header-content">
        <a class="site-title" href="/">Andreas Mausch</a>
        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              viewbox="0 0 16 16"
              width="100%"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5">
              <path d="m2.75 12.25h10.5m-10.5-4h10.5m-10.5-4h10.5"/>
            </svg>
          </a>
          <input id="nav-toggle" type="checkbox"/>
          <label class="nav-button-container" for="nav-toggle">
            <div class="nav-button"></div>
          </label>
          <ol class="site-nav-items">
            <a class="page-link" href="/"><li class="page-link-home">Home</li></a><a class="page-link" href="/whatsapp-viewer/"><li>WhatsApp Viewer</li></a><a class="page-link" href="/blog/"><li>Blog</li></a></ol>
        </nav>
      </div>
    </header>
    <div class="content">
      
<h1>Waveshare 7.3inch ACeP 7-Color E-Paper</h1>
<div>
  <time class="postlist-date" datetime="2024-11-10T18:00:00.000+00:00">Nov 10, 2024</time>
  <ul class="tags">
    
        
          <li><a href="/blog/tags/eink">#eink</a></li>
        
    
        
          <li><a href="/blog/tags/epaper">#epaper</a></li>
        
    
        
    
        
          <li><a href="/blog/tags/rpi-pico">#rpi-pico</a></li>
        
    
  </ul>
</div>


  <aside>
    <nav class="toc">
                <ol>
                    
                    <li><a href="#specs">1. Specs</a>
            		</li>

                    <li><a href="#convert-images">2. Convert images</a>
            
                <ol>
                    
                    <li><a href="#generate-a-palette">2.1. Generate a palette</a>
            		</li>

                    <li><a href="#convert-any-image-using-imagemagick">2.2. Convert any image using ImageMagick</a>
            		</li>

                    <li><a href="#copy-image-to-sd-card">2.3. Copy image to SD card</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#color-comparison">3. Color comparison</a>
            		</li>

                    <li><a href="#modded-firmware">4. Modded firmware</a>
            		</li>
                </ol>
            </nav>
  </aside>


<p>I have bought a digitial photo frame with an e-Ink Display.</p>
<p>It works really well, but copying new images is a bit hacky
and colors look a bit pale due to the display technology.</p>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/madeira-optimized.jpg" width="1280" height="930" alt="undefined">
<h1 id="specs" tabindex="-1">1. Specs <a class="header-anchor" href="#specs" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<p><a href="https://www.waveshare.com/wiki/PhotoPainter" class="external-link" target="_blank">Link</a></p>
<ul>
<li>RP2040 chip (also used in Raspberry Pi Pico)</li>
<li>Neither WiFi nor Bluetooth</li>
<li>instead, it has a Micro SD card slot</li>
<li>The displayed photo can be updated at chosen intervals</li>
<li>No power consumption, unless the photo is changed</li>
<li>Battery life for several months, if the image is updated daily</li>
<li>When the battery dies, the last photo is still shown</li>
</ul>
<p>So there is no app on your phone to transfer new images to the device,
instead you need to manually prepare them on your computer,
copy them on the SD card and press a button on the device to show the next image.</p>
<p>If you have several hundreds of images on it, it is impracticable to select it by hand.
Each change takes about 30 secs.</p>
<h1 id="convert-images" tabindex="-1">2. Convert images <a class="header-anchor" href="#convert-images" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<p>The device can only read images in 24-bit RGB <code class="language-plain">.bmp</code> format,
which only use the seven colors the display can show. See below for a list.</p>
<p>Waveshare provides an <code class="language-plain">convert.py</code> python script for converting images.</p>
<p>I like it better to do it with ImageMagick, and here is how I do it.</p>
<h2 id="generate-a-palette" tabindex="-1">2.1. Generate a palette <a class="header-anchor" href="#generate-a-palette" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>The e-Ink display only supports seven different colors.
You can find them in the <code class="language-plain">convert.py</code> script or by extracting them from a converted image.
They are:</p>
<ul>
<li>#000000 black</li>
<li>#FF0000 red</li>
<li>#00FF00 lime</li>
<li>#FF8000 orange</li>
<li>#FFFF00 yellow</li>
<li>#0000FF blue</li>
<li>#FFFFFF white</li>
</ul>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/palette.png" width="350" height="50" style="image-rendering: pixelated" alt="Palette">
<p>To generate a <code class="language-plain">palette.png</code> use this command:</p>
<div class="code-block">
    <button type="button" class="copy-to-clipboard">
      <i class="icon icon-copy"></i>
    </button>
    <pre class="language-bash"><code class="language-bash"><span class="highlight-line">magick convert <span class="token parameter variable">-size</span> 1x1 xc:black xc:red xc:lime <span class="token string">'xc:rgb(255,128,0)'</span> xc:yellow xc:blue xc:white +append palette.png</span></code></pre>

    </div><h2 id="convert-any-image-using-imagemagick" tabindex="-1">2.2. Convert any image using ImageMagick <a class="header-anchor" href="#convert-any-image-using-imagemagick" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<div class="code-block">
    <button type="button" class="copy-to-clipboard">
      <i class="icon icon-copy"></i>
    </button>
    <pre class="language-bash"><code class="language-bash"><span class="highlight-line">magick convert source.jpg <span class="token parameter variable">-resize</span> 800x480^ <span class="token parameter variable">-gravity</span> center <span class="token parameter variable">-extent</span> 800x480 <span class="token parameter variable">-dither</span> FloydSteinberg <span class="token parameter variable">-remap</span> palette.png <span class="token parameter variable">-type</span> truecolor <span class="token parameter variable">-set</span> filename:myname <span class="token string">'%t.%wx%h'</span> <span class="token string">'%[filename:myname].bmp'</span></span></code></pre>

    </div><p>I suggest two more changes:</p>
<ul>
<li>increase the contrast of the image by 30%
<code class="language-plain">-brightness-contrast 0,30</code></li>
<li>increase the saturation of the image to 200%, because the colors on the screen are more pale:
<code class="language-plain">-modulate 100,200,100</code></li>
</ul>
<p>The <code class="language-plain">FloydSteinberg</code> algorithm gave me the best results, but you can try others, like <code class="language-plain">Riemersma</code>.</p>
<p>My <strong>complete command</strong> looks like:</p>
<div class="code-block">
    <button type="button" class="copy-to-clipboard">
      <i class="icon icon-copy"></i>
    </button>
    <pre class="language-bash"><code class="language-bash"><span class="highlight-line">magick convert source.jpg <span class="token parameter variable">-resize</span> 800x480^ <span class="token parameter variable">-gravity</span> center <span class="token parameter variable">-extent</span> 800x480 -brightness-contrast <span class="token number">0,30</span> <span class="token parameter variable">-modulate</span> <span class="token number">100,200</span>,100 <span class="token parameter variable">-dither</span> FloydSteinberg <span class="token parameter variable">-remap</span> palette.png <span class="token parameter variable">-type</span> truecolor <span class="token parameter variable">-set</span> filename:myname <span class="token string">'%t.%wx%h'</span> <span class="token string">'%[filename:myname].bmp'</span></span></code></pre>

    </div><p>On a computer the image will look very shitty now, but on the actual photo frame it is much better in my opinion.</p>
<h2 id="copy-image-to-sd-card" tabindex="-1">2.3. Copy image to SD card <a class="header-anchor" href="#copy-image-to-sd-card" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>As the official instructions say: Format the SD card as FAT32, create a folder <code class="language-plain">pic</code>
and copy all the .bmps you like to the folder.</p>
<p>On the first start inside the device, it will generate a file list and the last used index.</p>
<h1 id="color-comparison" tabindex="-1">3. Color comparison <a class="header-anchor" href="#color-comparison" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<p>This is the original image:</p>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/madeira.jpg" width="1280" height="853" alt="undefined">
<p>That was the first version of it on the frame, which was kind of disappointing.
It almost looked like a monochrome version (tbh, the photo was also taken in bad lighting):</p>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/madeira-on-frame.jpg" width="1280" height="940" alt="undefined">
<p>Here is how it looked after +30% contrast and 100% saturation,
which in my opinion looks really shit on PC, but really good on the frame:</p>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/madeira.800x480.png" width="800" height="480" alt="undefined">
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/madeira-optimized.jpg" width="1280" height="930" alt="undefined">
<p>You cannot expect any color accuracy of course, but the colors still look great.</p>
<p>Here is a close-up where you can clearly see the dithering.
But from ~1 meter distance is it barely noticable anymore.</p>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/madeira-optimized-closeup.jpg" width="1280" height="720" alt="undefined">
<p>Here is the color palette for reference:</p>
<img src="/blog/2024-11-10-waveshare-photoframe-epaper/palette-on-frame.jpg" width="1280" height="903" alt="undefined">
<h1 id="modded-firmware" tabindex="-1">4. Modded firmware <a class="header-anchor" href="#modded-firmware" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<p><a href="https://github.com/tcellerier/Pico_ePaper_73" class="external-link" target="_blank">https://github.com/tcellerier/Pico_ePaper_73</a></p>
<blockquote>
<p>New mode 3, featuring:</p>
<ul>
<li>Maximum files increased to 2000 (from 100)</li>
<li>Complete randomization of photo sequence</li>
<li>More refresh rate precompiled options</li>
</ul>
</blockquote>
<p>How to flash:
<a href="https://www.youtube.com/watch?v=Kc_lxVL6aMw" class="external-link" target="_blank">https://www.youtube.com/watch?v=Kc_lxVL6aMw</a></p>


<script async src="/scripts/index.js"></script>

    </div>
  </body>
</html>
