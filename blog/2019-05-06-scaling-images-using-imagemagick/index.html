
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaling images using imagemagick</title>
    <link rel="stylesheet" href="/styles/style.css"/>
    
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" sizes="any"/>
  </head>
  <body>
    <header class="site-header">
      <div class="site-header-content">
        <a class="site-title" href="/">Andreas Mausch</a>
        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              viewbox="0 0 16 16"
              width="100%"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5">
              <path d="m2.75 12.25h10.5m-10.5-4h10.5m-10.5-4h10.5"/>
            </svg>
          </a>
          <input id="nav-toggle" type="checkbox"/>
          <label class="nav-button-container" for="nav-toggle">
            <div class="nav-button"></div>
          </label>
          <ol class="site-nav-items">
            <a class="page-link" href="/"><li class="page-link-home">Home</li></a><a class="page-link" href="/whatsapp-viewer/"><li>WhatsApp Viewer</li></a><a class="page-link" href="/blog/"><li>Blog</li></a></ol>
        </nav>
      </div>
    </header>
    <div class="content">
      
<h1>Blog post: Scaling images using imagemagick</h1>
<div>
  <time class="postlist-date" datetime="2019-05-02T15:00:00.000+00:00">May 2, 2019</time>
</div>



<h1 id="downscale-images-(batch)" tabindex="-1">1. Downscale images (batch) <a class="header-anchor" href="#downscale-images-(batch)" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<p>Just a useful command I use to downscale my images, for example to share them on social media.</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line">magick mogrify -auto-orient <span class="token parameter variable">-strip</span> <span class="token parameter variable">-resize</span> <span class="token string">"1920x1920>"</span> <span class="token parameter variable">-quality</span> <span class="token number">85</span> *.jpg</span></code></pre>
<p>Some explaination:</p>
<ul>
<li>magick comes with two similar tools for image modification: convert and mogrify. mogrify should be used if you want to replace the original file, convert if you want to save the modified output to a different file.</li>
<li>resize scales the image. the &quot;&gt;&quot; at the end says it shouldn't upscale any images. Note that magick automatically keeps the original aspect ratio. See more <a href="https://imagemagick.org/script/command-line-processing.php#geometry" class="external-link" target="_blank">here</a>.</li>
<li>quality sets the jpeg compression</li>
<li>auto-orient will rotate the image accordingly to it's exif metadata</li>
<li>strip will remove any exif metadata afterwards. I do this because I usually don't want to share private data like GPS locations, which is stored in exif.</li>
</ul>
<h1 id="convert-images-to-webp" tabindex="-1">2. Convert images to webp <a class="header-anchor" href="#convert-images-to-webp" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<p>I like to archive thumbnails of images. This way, you can store tons of images in small disk space.</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line">magick convert -auto-orient <span class="token parameter variable">-strip</span> <span class="token parameter variable">-resize</span> <span class="token string">"600x600>"</span> <span class="token parameter variable">-quality</span> <span class="token number">75</span> <span class="token parameter variable">-define</span> webp:method<span class="token operator">=</span><span class="token number">6</span> <span class="token parameter variable">-define</span> webp:use-sharp-yuv<span class="token operator">=</span><span class="token number">1</span> image.jpg image.webp</span></code></pre>
<h1 id="create-animated-webp" tabindex="-1">3. Create animated webp <a class="header-anchor" href="#create-animated-webp" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line">img2webp <span class="token parameter variable">-d</span> <span class="token number">300</span> <span class="token parameter variable">-lossy</span> <span class="token parameter variable">-m</span> <span class="token number">6</span> <span class="token parameter variable">-min_size</span> <span class="token parameter variable">-o</span> animated.webp *.jpg</span></code></pre>
<h1 id="batch-processing" tabindex="-1">4. Batch processing <a class="header-anchor" href="#batch-processing" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h1>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> *.jpg<span class="token punctuation">;</span> <span class="token keyword">do</span> magick convert /* your options */ <span class="token variable">$i</span> <span class="token variable">${i<span class="token operator">/</span>.jpg<span class="token operator">/</span>.webp}</span><span class="token punctuation">;</span> <span class="token keyword">done</span></span></code></pre>


<script async src="/scripts/index.js"></script>

    </div>
  </body>
</html>
