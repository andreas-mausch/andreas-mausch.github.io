
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surfstick Huawei E173 on Linux</title>
    <link rel="stylesheet" href="/styles/style.css"/>
    
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" sizes="any"/>
  </head>
  <body>
    <header class="site-header">
      <div class="site-header-content">
        <a class="site-title" href="/">Andreas Mausch</a>
        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              viewbox="0 0 16 16"
              width="100%"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5">
              <path d="m2.75 12.25h10.5m-10.5-4h10.5m-10.5-4h10.5"/>
            </svg>
          </a>
          <input id="nav-toggle" type="checkbox"/>
          <label class="nav-button-container" for="nav-toggle">
            <div class="nav-button"></div>
          </label>
          <ol class="site-nav-items">
            <a class="page-link" href="/"><li class="page-link-home">Home</li></a><a class="page-link" href="/whatsapp-viewer/"><li>WhatsApp Viewer</li></a><a class="page-link" href="/blog/"><li>Blog</li></a></ol>
        </nav>
      </div>
    </header>
    <div class="content">
      
<h1>Surfstick Huawei E173 on Linux</h1>
<div>
  <time class="postlist-date" datetime="2017-05-31T17:00:00.000+00:00">May 31, 2017</time>
</div>



<p>I've tried to use an USB modem I've bought two years ago (and never really used) on my Linux machine.
On the first try, everything went plug'n'play and I was asked to enter the PIN and it automatically connected.
That was nice, but didn't work like that again. After some googling I've found this link:</p>
<p><a href="https://wiki.ubuntuusers.de/USB_ModeSwitch/" class="external-link" target="_blank">https://wiki.ubuntuusers.de/USB_ModeSwitch/</a><br>
(German only)</p>
<img src="/blog/2017-05-31-surfstick-huawei-e173-on-linux/huawei-lsusb-drive-mode.jpg" width="1565" height="900" alt="undefined">
<p>So &quot;Huawei Technologies Co., Ltd. Broadband stick&quot; is the device.<br>
We can see the Vendor ID (12d1) and the Product ID (1446).</p>
<p>A call to <code class="language-plain">usb-devices</code> shows it is in drive-mode:</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ usb-devices</span>
<span class="highlight-line">T:  <span class="token assign-left variable">Bus</span><span class="token operator">=</span>01 <span class="token assign-left variable">Lev</span><span class="token operator">=</span>01 <span class="token assign-left variable">Prnt</span><span class="token operator">=</span>01 <span class="token assign-left variable">Port</span><span class="token operator">=</span>00 <span class="token assign-left variable">Cnt</span><span class="token operator">=</span>01 Dev<span class="token comment">#=  5 Spd=480 MxCh= 0</span></span>
<span class="highlight-line">D:  <span class="token assign-left variable">Ver</span><span class="token operator">=</span> <span class="token number">2.00</span> <span class="token assign-left variable">Cls</span><span class="token operator">=</span>00<span class="token punctuation">(</span><span class="token operator">></span>ifc <span class="token punctuation">)</span> <span class="token assign-left variable">Sub</span><span class="token operator">=</span>00 <span class="token assign-left variable">Prot</span><span class="token operator">=</span>00 <span class="token assign-left variable">MxPS</span><span class="token operator">=</span><span class="token number">64</span> <span class="token comment">#Cfgs=  1</span></span>
<span class="highlight-line">P:  <span class="token assign-left variable">Vendor</span><span class="token operator">=</span>12d1 <span class="token assign-left variable">ProdID</span><span class="token operator">=</span><span class="token number">1446</span> <span class="token assign-left variable">Rev</span><span class="token operator">=</span>00.00</span>
<span class="highlight-line">S:  <span class="token assign-left variable">Manufacturer</span><span class="token operator">=</span>HUAWEI Technology</span>
<span class="highlight-line">S:  <span class="token assign-left variable">Product</span><span class="token operator">=</span>HUAWEI Mobile</span>
<span class="highlight-line">C:  <span class="token comment">#Ifs= 2 Cfg#= 1 Atr=e0 MxPwr=500mA</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 1 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage</span></span></code></pre>
<p>The adjusted command from the wiki page (I've exchanged the Product ID):</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">sudo</span> usb_modeswitch <span class="token parameter variable">-v</span> 0x12d1 <span class="token parameter variable">-p</span> 0x1446 <span class="token parameter variable">-V</span> 0x12d1 <span class="token parameter variable">-P</span> 0x1436 <span class="token parameter variable">-M</span> <span class="token number">55534243123456780000000000000011062000000100000000000000000000</span></span></code></pre>
<p>Afterwards, <code class="language-plain">lsusb</code> shows this:</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ lsusb</span>
<span class="highlight-line">Bus 002 Device 001: ID 1d6b:0003 Linux Foundation <span class="token number">3.0</span> root hub</span>
<span class="highlight-line">Bus 001 Device 003: ID 04f3:21d4 Elan Microelectronics Corp.</span>
<span class="highlight-line">Bus 001 Device 002: ID <span class="token number">8087</span>:0a2b Intel Corp.</span>
<span class="highlight-line">Bus 001 Device 004: ID 0c45:6713 Microdia</span>
<span class="highlight-line">Bus 001 Device 006: ID 12d1:1436 Huawei Technologies Co., Ltd. Broadband stick</span>
<span class="highlight-line">Bus 001 Device 001: ID 1d6b:0002 Linux Foundation <span class="token number">2.0</span> root hub</span></code></pre>
<p>And <code class="language-plain">usb-devices</code> this:</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ usb-devices</span>
<span class="highlight-line">T:  <span class="token assign-left variable">Bus</span><span class="token operator">=</span>01 <span class="token assign-left variable">Lev</span><span class="token operator">=</span>01 <span class="token assign-left variable">Prnt</span><span class="token operator">=</span>01 <span class="token assign-left variable">Port</span><span class="token operator">=</span>00 <span class="token assign-left variable">Cnt</span><span class="token operator">=</span>01 Dev<span class="token comment">#=  6 Spd=480 MxCh= 0</span></span>
<span class="highlight-line">D:  <span class="token assign-left variable">Ver</span><span class="token operator">=</span> <span class="token number">2.00</span> <span class="token assign-left variable">Cls</span><span class="token operator">=</span>ef<span class="token punctuation">(</span>misc <span class="token punctuation">)</span> <span class="token assign-left variable">Sub</span><span class="token operator">=</span>02 <span class="token assign-left variable">Prot</span><span class="token operator">=</span>01 <span class="token assign-left variable">MxPS</span><span class="token operator">=</span><span class="token number">64</span> <span class="token comment">#Cfgs=  1</span></span>
<span class="highlight-line">P:  <span class="token assign-left variable">Vendor</span><span class="token operator">=</span>12d1 <span class="token assign-left variable">ProdID</span><span class="token operator">=</span><span class="token number">1436</span> <span class="token assign-left variable">Rev</span><span class="token operator">=</span>00.00</span>
<span class="highlight-line">S:  <span class="token assign-left variable">Manufacturer</span><span class="token operator">=</span>HUAWEI Technology</span>
<span class="highlight-line">S:  <span class="token assign-left variable">Product</span><span class="token operator">=</span>HUAWEI Mobile</span>
<span class="highlight-line">C:  <span class="token comment">#Ifs= 7 Cfg#= 1 Atr=e0 MxPwr=500mA</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 0 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=ff Prot=ff Driver=option</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 1 Alt= 0 #EPs= 1 Cls=02(commc) Sub=06 Prot=ff Driver=cdc_ether</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 2 Alt= 0 #EPs= 2 Cls=0a(data ) Sub=00 Prot=00 Driver=cdc_ether</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 3 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=option</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 4 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=option</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 5 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage</span></span>
<span class="highlight-line">I:  If<span class="token comment">#= 6 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage</span></span></code></pre>
<p>I am then asked for my PIN again and the device is visible in mmcli and Modem Manager GUI.
Sometimes it takes a while to build up a connection but in the end it worked 10/10.</p>
<img src="/blog/2017-05-31-surfstick-huawei-e173-on-linux/huawei-e173-speedtest.jpg" width="640" height="390" alt="undefined">


<script async src="/scripts/index.js"></script>

    </div>
  </body>
</html>
