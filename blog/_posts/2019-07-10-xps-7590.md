---
layout: post
title:  "Dell XPS 15 7590"
date:   2019-07-10 22:00:00 +02:00
tags:
---

# Change WiFi chip for Intel 9260

![]({{ site.baseurl }}/images/2019-07-10-xps-7590/box.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/xps-7590-on-chair.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/9550-vs-7590.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/xps-7590-back.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/screwdriver.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/cut.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/xps-7590-opened.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/xps-7590-opened-close.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/xps-7590-killer-wifi-card.jpg){:width="200px"}

# BIOS settings

![]({{ site.baseurl }}/images/2019-07-10-xps-7590/bios-01-ahci.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/bios-02-usb-powershare.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/bios-03-absolute-tracking.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/bios-04-secure-boot.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/bios-05-fastboot.jpg){:width="200px"}

# Manjaro

![]({{ site.baseurl }}/images/2019-07-10-xps-7590/boot-manager.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/manjaro-boot-screen.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/manjaro-booting.jpg){:width="200px"}
![]({{ site.baseurl }}/images/2019-07-10-xps-7590/manjaro-booted.jpg){:width="200px"}

# Terminal settings

*~/.config/xfce4/terminal/terminalrc*

```
[Configuration]
MiscAlwaysShowTabs=FALSE
MiscBell=FALSE
MiscBordersDefault=FALSE
MiscCursorBlinks=FALSE
MiscCursorShape=TERMINAL_CURSOR_SHAPE_BLOCK
MiscDefaultGeometry=130x38
MiscInheritGeometry=FALSE
MiscMenubarDefault=FALSE
MiscMouseAutohide=FALSE
MiscToolbarDefault=FALSE
MiscConfirmClose=TRUE
MiscCycleTabs=TRUE
MiscTabCloseButtons=TRUE
MiscTabCloseMiddleClick=TRUE
MiscTabPosition=GTK_POS_TOP
MiscHighlightUrls=TRUE
ScrollingLines=999999
BackgroundDarkness=0,860000
ScrollingOnOutput=FALSE
MiscBellUrgent=FALSE
MiscMouseWheelZoom=TRUE
MiscMiddleClickOpensUri=FALSE
MiscCopyOnSelect=FALSE
MiscRewrapOnResize=TRUE
MiscUseShiftArrowsToScroll=FALSE
MiscSlimTabs=FALSE
MiscNewTabAdjacent=FALSE
BackgroundImageFile=/home/neonew/Bilder/Frischer-Waldtropfen.jpg
BackgroundImageStyle=TERMINAL_BACKGROUND_STYLE_STRETCHED
BackgroundImageShading=0,650000
MiscShowRelaunchDialog=TRUE
FontName=Source Code Pro 11
BackgroundMode=TERMINAL_BACKGROUND_IMAGE
MiscSearchDialogOpacity=100
MiscShowUnsafePasteDialog=TRUE
ScrollingBar=TERMINAL_SCROLLBAR_NONE
DropdownAlwaysShowTabs=FALSE
DropdownKeepAbove=FALSE
DropdownKeepOpenDefault=TRUE
DropdownStatusIcon=FALSE
ColorPalette=rgb(37,31,31);rgb(230,131,96);rgb(148,231,107);rgb(255,172,24);rgb(70,174,222);rgb(240,85,121);rgb(214,219,172);rgb(239,239,239);rgb(94,94,94);rgb(255,169,138);rgb(149,231,107);rgb(255,172,24);rgb(70,174,222);rgb(238,94,128);rgb(214,219,172);rgb(239,239,239)
DropdownWidth=100
DropdownHeight=75
ColorForeground=#ffffffffffff
ColorBackground=#000000000000
ColorCursor=#ffffffffffff
```

# yay

Just as in the [readme](https://github.com/Jguer/yay):

```
cd /tmp
mkdir yay-build
cd yay-build
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si
```

## PKGBUILD (.tar)

In */etc/makepkg.conf* change the line:

```
PKGEXT='.pkg.tar'
```

# intel-undervolt

```
yay -S intel-undervolt
```

Modify */etc/intel-undervolt.conf*.  
I've set this on my i9-9980HK:

```
undervolt 0 'CPU' -190
undervolt 1 'GPU' -75
```

```
sudo intel-undervolt apply
# If this was successful, and you did some tests to make sure it's stable:
systemctl enable intel-undervolt.service
```

# XDG user dirs

Manjaro creates localized user directories by default. I don't like it too much.

So my *~/.config/user-dirs.dirs* looks like:

```
XDG_DESKTOP_DIR="$HOME/Desktop"
XDG_DOWNLOAD_DIR="$HOME/Downloads"
XDG_TEMPLATES_DIR="$HOME/Templates"
XDG_PUBLICSHARE_DIR="$HOME/Public"
XDG_DOCUMENTS_DIR="$HOME/Documents"
XDG_MUSIC_DIR="$HOME/Music"
XDG_PICTURES_DIR="$HOME/Pictures"
XDG_VIDEOS_DIR="$HOME/Videos"
```

# ecryptfs

Login as root after a fresh reboot. No other user session should exist.

```
modprobe ecryptfs
ecryptfs-migrate-home -u username
```

Change */etc/pam.d/system-auth* according to [ECryptfs#Encrypting_a_home_directory](https://wiki.archlinux.org/index.php/ECryptfs#Encrypting_a_home_directory).

# hwclock

Set current system time and write it to BIOS.

```
sudo ntpdate 0.europe.pool.ntp.org
sudo hwclock --show
sudo hwclock --systohc
```

# xcape

There is a problem if you want the *Super Key* to open your whiskermenu, but also want to set custom shortcuts like *Super+E* to open your file manager. So create a new file:

*~/.config/autostart/xcape.desktop*

```
[Desktop Entry]
Type=Application
Name=xcape
Exec=/usr/bin/xcape -e 'Super_L=Alt_L|F1;Super_R=Alt_L|F1'
StartupNotify=false
Terminal=false
```

Install xcape:

```
sudo pacman -S xcape
```

Now, open *xfce4-keyboard-settings*, set the shortcut for *xfce4-popup-whiskermenu* to *ALT+F1*.

Additionally, set the shortcut for *exo-open --launch FileManager* to *Super+E*. Restart.

From now on, if you just press the *Super Key*, the whiskermenu should open. But if you press *Super+E*, your file manager opens **but the whiskermenu does not**.

# My shortcuts

| Command                       | Shortcut                | Description                                  |
|-------------------------------|-------------------------|----------------------------------------------|
| exo-open --launch FileManager | *Super+E*               | Thunar                                       |
| exo-open --launch MailReader  | *Super+T*               | Thunderbird                                  |
| exo-open --launch WebBrowser  | *Super+W*               | Chromium                                     |
| galculator                    | *Super+C*               | Calculator                                   |
| xfce4-popup-whiskermenu       | *Alt+F1*                | Start menu (really triggered by *Super Key*) |
| xfce4-screenshooter -f        | *Print*                 | Full screen                                  |
| xfce4-screenshooter -w        | *Shift+Print*           | Window                                       |
| xfce4-screenshooter -r        | *Ctrl+Print*            | Region (user can select it)                  |
| xfce4-terminal --drop-down    | *Super+dead circumflex* | Console (Counter-Strike style)               |
| xflock4                       | *Ctrl+Alt+Del*          | Lock the screen                              |

# ä vs ^ (aka dead circumflex)

First, I've tried to open the terminal by using just the *dead circumflex* key.
This worked, however my 'ä' key didn't anymore.

Even *xev* didn't recognize the key.
That's why I've changed the shortcut to *Super+dead circumflex*.

# Not working

- Display brightness
- Fingerprint reader
